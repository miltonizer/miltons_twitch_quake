<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
      	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from ezquake.sourceforge.net/docs/?rtc by HTTrack Website Copier/3.x [XR&CO'2005], Sun, 27 Apr 2008 20:59:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  <meta name="keywords" content="ezQuake, manual, guide, tutorial, how-to, howto, setting, quake, quakeworld, client, help, readme, install" />
  <meta name="description" content="The Complete guide to using QuakeWorld &trade; client ezQuake" />
  <meta name="author" content="http://sourceforge.net/users/johnnycz/" />
  <meta name="generator" content="about.txt" />
  <title>ezQuake Manual: RTC timer patch for Linux FuhQuake 0.31</title>
  <link rel="StyleSheet" type="text/css" href="style.css" title="verze 1" />
  <link rel="Alternate StyleSheet" type="text/css" href="style2.css" media="screen" title="verze 2 cuky" />
  <link rel="Alternate Stylesheet" href="http://www.w3.org/StyleSheets/Core/Modernist" media="screen" type="text/css" title="W3C Modernist" />
</head>
<body>
<h1><a href="index.html">ezQuake Manual</a>: RTC timer patch for Linux FuhQuake 0.31</h1>


<p>Patch was ported by disconnect.</p>
<h5>ver 1.2</h5>
<h5>author: James Ravn &lt;jravn@ucla.edu&gt;</h5>

<h3>INSTALL NOTES:</h3>
<p>Make sure that RTC support is compiled into the linux kernel, and that
the timing is set to 1024Hz.  To set the timing as root:</p>

<p><code><pre>echo dev.rtc.max-user-freq=1024 >> /etc/sysctl.conf
echo 1024 > /proc/sys/dev/rtc/max-user-freq</pre></code></p>

<p>The first line sets the 1024Hz timing so that it is persistent through reboots,
and the second line sets the 1024Hz timing right away.</p>

<p>Also, make sure that /dev/rtc is world readable.  It usually is by default.</p>

<h3>OVERVIEW:</h3>
<p>FuhQuake's handling of Linux timers is still the old arcane method of
gettimeofday() that the original Linux QWCL releases use. gettimeofday() is
succeptible to all kinds of problems, such as bad drifting (it can even go
backwards in time!) and a fair amount of inaccuracy (exceeding +/- 10ms).</p>

<p>Most modern timing sensitive linux applications, such as mplayer, use the
RTC if its available for utmost precision, and usleep() in all other cases.
I've gone halfway and implemented RTC timer functionality into FuhQuake
through this patch.</p>

<h3>IS IT WORTH IT?:</h3>
<p>I haven't tested out the effects in gameplay of this patch thoroughly enough
to comment, but the much increased accuracy of the timer should have noticeable
effect.  At the least, it can't hurt.;)  Please post personal experiences at
gibbage.mine.nu/forum!</p>

<h3>WHAT IS THE RTC:</h3>
<p>The RTC is the real time clock that is built into hardware on your
motherboard.  It isn't succeptible to the usual drift that CPU based clocks
suffer from.  For more detailed information about the RTC check out the
documentation that comes with the linux kernel (Documentation/rtc.txt) and
google.</p>


<p id="last-update">Last update: 31.12.1969 16:00 PST, made by <a href="http://sourceforge.net/users/johnnycz/">JohnNy_cz</a> | <a href="about.txt">ezQDocs</a></p>
<p><a href="http://sourceforge.net/"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=117445&amp;type=2" width="125" height="37" alt="SourceForge.net Logo" /></a></p>
</body>

<!-- Mirrored from ezquake.sourceforge.net/docs/?rtc by HTTrack Website Copier/3.x [XR&CO'2005], Sun, 27 Apr 2008 20:59:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>
